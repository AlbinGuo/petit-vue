{"version":3,"file":"vue.js","sources":["../../src/observe.js","../../src/state.js","../../src/init.js","../../src/index.js"],"sourcesContent":["export function observe(data, key, val) {\r\n  Object.defineProperty(data, key, {\r\n    enumerable: true,\r\n    configurable: true,\r\n    get: function() {\r\n      return val;\r\n    },\r\n    set: function(newVal) {\r\n      if (val === newVal) return;\r\n      val = newVal;\r\n      // 更新视图\r\n      let app = document.getElementById(\"app\");\r\n      app.innerHTML = val;\r\n      console.log(\"更新视图完成\");\r\n    }\r\n  });\r\n}\r\n","import { observe } from \"./observe\";\r\n\r\nexport function stateMixin() {}\r\n\r\nexport function initState(vm) {\r\n  const opt = vm.$options;\r\n  if (opt.props) initProps(vm);\r\n  if (opt.methods) initMethods(vm);\r\n  if (opt.data) initData(vm);\r\n  if (opt.computed) initComputed(vm);\r\n  if (opt.watch) initWatch(vm);\r\n}\r\n\r\nfunction initProps(vm) {}\r\n\r\nfunction initMethods(vm) {}\r\n\r\nfunction initData(vm) {\r\n  // 传递过来的data，此时data可能是函数，也可能是对象{}\r\n  // 但最终都要转为对象\r\n  let data = vm.$options.data;\r\n  data = vm._data = typeof data === \"function\" ? data.call(vm) : data || {};\r\n  // 对象劫持，转为响应式数据->MVVM\r\n  Object.keys(data).forEach(key => {\r\n    observe(data, key, data[key]);\r\n  });\r\n}\r\n\r\nfunction initComputed(vm) {}\r\n\r\nfunction initWatch(vm) {}\r\n","import { initState } from \"./state\";\r\n// 在Vue原型上绑定私有的初始化方法_init\r\nexport function initMixin(Vue) {\r\n  Vue.prototype._init = function(options) {\r\n    const vm = this;\r\n    vm.$options = options;\r\n    // 状态初始化: 初始化顺序：props-methods-data-computed-watch\r\n    initState(vm);\r\n  };\r\n}\r\n","import { initMixin } from \"./init\";\r\nimport { stateMixin } from \"./state\";\r\n\r\n// Vue的构造函数\r\nfunction Vue(options) {\r\n  // Vue的初始化操作\r\n  this._init(options);\r\n}\r\n\r\n// 在Vue原型上绑定_init初始化方法\r\ninitMixin(Vue);\r\n// 状态初始化\r\nstateMixin();\r\n\r\nexport default Vue;\r\n"],"names":["observe","data","key","val","Object","defineProperty","enumerable","configurable","get","set","newVal","app","document","getElementById","innerHTML","console","log","initState","vm","opt","$options","props","initProps","methods","initMethods","initData","computed","initComputed","watch","initWatch","_data","call","keys","forEach","initMixin","Vue","prototype","_init","options"],"mappings":";;;;;;EAAO,SAASA,OAAT,CAAiBC,IAAjB,EAAuBC,GAAvB,EAA4BC,GAA5B,EAAiC;EACtCC,EAAAA,MAAM,CAACC,cAAP,CAAsBJ,IAAtB,EAA4BC,GAA5B,EAAiC;EAC/BI,IAAAA,UAAU,EAAE,IADmB;EAE/BC,IAAAA,YAAY,EAAE,IAFiB;EAG/BC,IAAAA,GAAG,EAAE,SAAW,GAAA,GAAA;EACd,MAAA,OAAOL,GAAP,CAAA;EACD,KAL8B;EAM/BM,IAAAA,GAAG,EAAE,SAASC,GAAAA,CAAAA,MAAT,EAAiB;EACpB,MAAIP,IAAAA,GAAG,KAAKO,MAAZ,EAAoB,OAAA;EACpBP,MAAAA,GAAG,GAAGO,MAAN,CAFoB;;EAIpB,MAAA,IAAIC,GAAG,GAAGC,QAAQ,CAACC,cAAT,CAAwB,KAAxB,CAAV,CAAA;EACAF,MAAAA,GAAG,CAACG,SAAJ,GAAgBX,GAAhB,CAAA;EACAY,MAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,CAAA,CAAA;EACD,KAAA;EAb8B,GAAjC,CAAA,CAAA;EAeD;;ECZM,SAASC,SAAT,CAAmBC,EAAnB,EAAuB;EAC5B,EAAA,IAAMC,GAAG,GAAGD,EAAE,CAACE,QAAf,CAAA;EACA,EAAA,IAAID,GAAG,CAACE,KAAR,EAAeC,CAAA;EACf,EAAA,IAAIH,GAAG,CAACI,OAAR,EAAiBC,CAAA;EACjB,EAAA,IAAIL,GAAG,CAAClB,IAAR,EAAcwB,QAAQ,CAACP,EAAD,CAAR,CAAA;EACd,EAAA,IAAIC,GAAG,CAACO,QAAR,EAAkBC,CAAA;EAClB,EAAA,IAAIR,GAAG,CAACS,KAAR,EAAeC,CAAA;EAChB,CAAA;;EAMD,SAASJ,QAAT,CAAkBP,EAAlB,EAAsB;EACpB;EACA;EACA,EAAA,IAAIjB,IAAI,GAAGiB,EAAE,CAACE,QAAH,CAAYnB,IAAvB,CAAA;EACAA,EAAAA,IAAI,GAAGiB,EAAE,CAACY,KAAH,GAAW,OAAO7B,IAAP,KAAgB,UAAhB,GAA6BA,IAAI,CAAC8B,IAAL,CAAUb,EAAV,CAA7B,GAA6CjB,IAAI,IAAI,EAAvE,CAJoB;;EAMpBG,EAAAA,MAAM,CAAC4B,IAAP,CAAY/B,IAAZ,EAAkBgC,OAAlB,CAA0B,UAAA/B,GAAG,EAAI;EAC/BF,IAAAA,OAAO,CAACC,IAAD,EAAOC,GAAP,EAAYD,IAAI,CAACC,GAAD,CAAhB,CAAP,CAAA;EACD,GAFD,CAAA,CAAA;EAGD;;ECxBM,SAASgC,SAAT,CAAmBC,GAAnB,EAAwB;EAC7BA,EAAAA,GAAG,CAACC,SAAJ,CAAcC,KAAd,GAAsB,UAASC,OAAT,EAAkB;EACtC,IAAMpB,IAAAA,EAAE,GAAG,IAAX,CAAA;EACAA,IAAAA,EAAE,CAACE,QAAH,GAAckB,OAAd,CAFsC;;EAItCrB,IAAAA,SAAS,CAACC,EAAD,CAAT,CAAA;EACD,GALD,CAAA;EAMD;;ECLD,SAASiB,GAAT,CAAaG,OAAb,EAAsB;EACpB;EACA,EAAKD,IAAAA,CAAAA,KAAL,CAAWC,OAAX,CAAA,CAAA;EACD;;;EAGDJ,SAAS,CAACC,GAAD,CAAT;;;;;;;;"}